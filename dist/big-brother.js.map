{"version":3,"sources":["webpack://big-brother/webpack/universalModuleDefinition","webpack://big-brother/webpack/bootstrap","webpack://big-brother/external \"react\"","webpack://big-brother/./src/middleware/journeyConnector.js","webpack://big-brother/./src/api-providers/mlabProvider.js","webpack://big-brother/./src/react-ui/RecordButton.js","webpack://big-brother/./src/react-ui/Recorder.js","webpack://big-brother/./src/react-ui/Player.js","webpack://big-brother/./src/react-ui/JourneyControls.js","webpack://big-brother/./src/react-ui/Journey.js","webpack://big-brother/./src/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","require","_react","recording","initialJourneyInfo","initialState","actions","journeyInfo","api","getRecord","console","log","sendRecord","appStore","resetRecorder","startRecording","getState","stopRecording","sendRecords","assign","journeyMiddleWare","startPlaying","id","then","_ref","dispatch","type","forEach","action","index","setTimeout","store","next","push","rootReducer","apiProvider","mlabApi","dbName","collName","queryParams","apiKey","fetch","response","json","catch","e","warn","data","body","JSON","stringify","method","headers","Headers","Content-Type","getPostConfig","RecordButton","handleClick","_react2","default","createElement","style","position","top","right","width","height","padding","border","opacity","margin","onClick","propTypes","PropTypes","func","isRequired","Recorder","recordId","Player","props","_classCallCheck","this","_this","_possibleConstructorReturn","__proto__","getPrototypeOf","submit","bind","idInput","_this2","onSubmit","ref","input","JourneyControls","playing","_Player2","_Recorder2","handleHide","_journeyConnector","Journey","state","isShowed","sending","show","hide","setState","_this3","_JourneyControls2","_extends","_RecordButton2"],"mappings":"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","file":"big-brother.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"big-brother\"] = factory();\n\telse\n\t\troot[\"big-brother\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 9);\n","module.exports = require(\"react\");","import React from 'react';\n\nlet recording = false;\n\nconst initialJourneyInfo = {\n    initialState: null,\n    actions: [],\n};\nconst journeyInfo = {};\nconst api = {\n    getRecord: console.log,\n    sendRecord: console.log,\n};\nlet reducer = console.log;\nlet appStore = null;\n\nexport const startRecording = () => {\n    journeyInfo.initialState = appStore.getState();\n\n    recording = true;\n};\n\nexport const stopRecording = () => {\n    recording = false;\n};\n\nexport const sendRecords = () => api.sendRecord(journeyInfo);\n\nexport const resetRecorder = () => {\n    Object.assign(journeyInfo, initialJourneyInfo);\n};\n\nexport const startPlaying = (id) => api.getRecord(id)\n    .then(({initialState, actions}) => {\n        console.log('Received data', initialState, actions);\n\n        appStore.dispatch({\n            type: 'JOURNEY_REPRODUCING',\n            initialState\n        });\n\n        actions.forEach((action, index) => {\n            setTimeout(() => appStore.dispatch(action), index*1000);\n        });\n    });\n\nconst journeyMiddleWare = store => {\n    appStore = store;\n\n    return next => action => {\n        if (recording) {\n            journeyInfo.actions.push(action);\n        }\n        next(action);\n    }\n};\n\nconst journeyConnector = (rootReducer, apiProvider) => {\n    Object.assign(api, apiProvider);\n    reducer = rootReducer;\n\n    return journeyMiddleWare;\n};\n\nresetRecorder();\n\nexport default journeyConnector;\n","const getPostConfig = (data) => ({\n    body: JSON.stringify(data),\n    method: 'POST',\n    headers: new Headers({ 'Content-Type': 'application/json' }),\n});\n\nconst getMLabConfig = ({ dbName, collName, apiKey }) => {\n    const mlabApi = `https://api.mlab.com/api/1/databases/${dbName}/collections/${collName}`;\n    const queryParams = `apiKey=${apiKey}`;\n\n    return {\n        getRecord: (id) => fetch(`${mlabApi}/${id}?${queryParams}`)\n            .then(response => response.json())\n            .catch(e => console.warn('Failed getRecord', e)),\n        sendRecord: (data) => fetch(`${mlabApi}?${queryParams}`, getPostConfig(data))\n            .then(response => response.json())\n            .then(data => data['_id']['$oid'])\n            .catch(e => console.warn('Failed sendRecord', e))\n        ,\n    };\n};\n\nexport default getMLabConfig;\n","import React, { Component, PropTypes } from 'react';\n\nconst RecordButton = ({handleClick}) => (\n    <div style={{\n        position: 'fixed',\n        top: '0',\n        right: '0',\n        width: '20px',\n        height: '20px',\n        padding: '2px',\n        border: '1px solid white',\n        opacity: '50%'\n    }}>\n        <button style={{margin: '0', padding: '0', border: 'none'}} onClick={handleClick}>\n            ðŸ”´\n        </button>\n    </div>\n);\n\nRecordButton.propTypes = {\n    handleClick: PropTypes.func.isRequired\n};\n\nexport default RecordButton;\n","import React  from 'react';\n\nexport const Recorder = ({\n     stopRecording,\n     startRecording,\n     recording,\n     recordId\n }) => (\n    recordId ? <span>{recordId}</span> : (recording\n        ? <button onClick={stopRecording}>Stop</button>\n        : <button onClick={startRecording}>Start</button>)\n);\n\nexport default Recorder;\n","import React, { Component } from 'react';\n\nexport class Player extends Component {\n    constructor(props) {\n        super(props);\n        this.submit = this.submit.bind(this);\n    }\n\n    submit() {\n        this.props.startPlaying(this.idInput.value);\n    }\n\n    render() {\n        return (\n            <form onSubmit={this.submit}>\n                <input\n                    type=\"text\"\n                    ref={(input) => { this.idInput = input; }}\n                />\n                <button type=\"submit\">Fetch</button>\n            </form>\n        )\n    }\n}\n\nexport default Player;\n","import React, { Component, PropTypes } from 'react';\nimport Player from './Player';\nimport Recorder from './Recorder';\n\nexport const JourneyControls = props => (\n    props.playing ? <span>Reproduced</span> : (\n        <div>\n            {!props.recording &&  <Player {...props} />}\n            <Recorder {...props} />\n            <button onClick={props.handleHide}>Hide controls</button>\n        </div>\n    )\n);\n\nJourneyControls.propTypes = {\n    handleHide: PropTypes.func.isRequired\n};\n\nexport default JourneyControls;\n\n","import React, { Component } from 'react';\nimport { startRecording, stopRecording, sendRecords, startPlaying } from '../middleware/journeyConnector';\nimport JourneyControls from './JourneyControls';\nimport RecordButton from './RecordButton';\n\nclass Journey extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isShowed: false,\n            recording: false,\n            playing: false,\n            sending: false,\n            recordId: '',\n        };\n\n        this.startRecording = this.startRecording.bind(this);\n        this.stopRecording = this.stopRecording.bind(this);\n        this.startPlaying = this.startPlaying.bind(this);\n        this.show = this.show.bind(this);\n        this.hide = this.hide.bind(this);\n    }\n\n    startRecording() {\n        startRecording();\n        this.setState({ recording: true });\n    }\n\n    stopRecording() {\n        stopRecording();\n        this.setState({ recording: false, sending: true });\n\n        sendRecords()\n            .then((recordId) => {\n                console.log('recordId', recordId);\n                this.setState({ recordId, sending: false });\n            });\n    }\n\n    startPlaying(id) {\n        this.setState({ sending: true });\n\n        startPlaying(id)\n            .then(() => this.setState({ playing: true, sending: false }));\n    }\n\n    show() {\n        this.setState({ isShowed: true });\n    }\n\n    hide() {\n        this.setState({ isShowed: false });\n    }\n\n    render() {\n        if (this.state.isShowed) {\n            return (<div style={{width: '100%', height: '100%', border: '1px solid green'}}>\n                { this.state.sending\n                    ? <span>Spinner</span>\n                    : <JourneyControls\n                        {...this.state}\n                        startRecording={this.startRecording}\n                        stopRecording={this.stopRecording}\n                        startPlaying={this.startPlaying}\n                        handleHide={this.hide}\n                    />\n                }\n            </div>);\n        } else {\n            return <RecordButton handleClick={this.show}></RecordButton>\n        }\n    }\n}\n\nexport default Journey;\n","export { default as BBUI } from './react-ui/Journey';\nexport { default as bbMLabProvider } from './api-providers/mlabProvider';\nexport { default as bbMiddleware } from './middleware/journeyConnector';\n"],"sourceRoot":""}